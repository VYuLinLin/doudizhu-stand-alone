{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\util/assets\\scripts\\util\\event_lister.js"],"names":["eventLister","obj","register","on","type","callback","target","listener","hasOwnProperty","cc","assert","push","emit","methodList","i","length","args","arguments","apply","remove","filter","e","removeLister","removeAllLister"],"mappings":";;;;;;;;;;;AAAA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAAUC,GAAV,EAAe;AACjC,MAAIC,QAAQ,GAAG,EAAf;;AAEAD,EAAAA,GAAG,CAACE,EAAJ,GAAS,UAAUC,IAAV,EAAgBC,QAAhB,EAA0BC,MAA1B,EAAkC;AACzC,QAAMC,QAAQ,GAAG;AACfF,MAAAA,QAAQ,EAARA,QADe;AAEfC,MAAAA,MAAM,EAANA;AAFe,KAAjB;;AAIA,QAAIJ,QAAQ,CAACM,cAAT,CAAwBJ,IAAxB,CAAJ,EAAmC;AACjCK,MAAAA,EAAE,CAACC,MAAH,CAAUL,QAAV;AADiC;AAAA;AAAA;;AAAA;AAEjC,6BAAuBH,QAAQ,CAACE,IAAD,CAA/B,8HAAuC;AAAA,cAA5BG,SAA4B;;AACrC,cAAID,MAAM,KAAKC,SAAQ,CAACD,MAAxB,EAAgC;AAC9B;AACD;AACF;AANgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOjCJ,MAAAA,QAAQ,CAACE,IAAD,CAAR,CAAeO,IAAf,CAAoBJ,QAApB;AACD,KARD,MAQO;AACLL,MAAAA,QAAQ,CAACE,IAAD,CAAR,GAAiB,CAACG,QAAD,CAAjB;AACD;AACF,GAhBD;;AAiBAN,EAAAA,GAAG,CAACW,IAAJ,GAAW,UAASR,IAAT,EAAe;AACxB,QAAIF,QAAQ,CAACM,cAAT,CAAwBJ,IAAxB,CAAJ,EAAmC;AACjC,UAAMS,UAAU,GAAGX,QAAQ,CAACE,IAAD,CAA3B;;AACA,WAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,UAAU,CAACE,MAA/B,EAAuC,EAAED,CAAzC,EAA4C;AAAA,4BACfD,UAAU,CAACC,CAAD,CADK;AAAA,YACnCT,QADmC,iBACnCA,QADmC;AAAA,YACzBC,MADyB,iBACzBA,MADyB;AAE1C,YAAMU,IAAI,GAAG,EAAb;;AACA,aAAK,IAAIF,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGG,SAAS,CAACF,MAA9B,EAAsC,EAAED,EAAxC,EAA2C;AACzCE,UAAAA,IAAI,CAACL,IAAL,CAAUM,SAAS,CAACH,EAAD,CAAnB;AACD;;AACDT,QAAAA,QAAQ,CAACa,KAAT,CAAeZ,MAAf,EAAuBU,IAAvB;AACD;AACF;AAEF,GAbD;;AAcAf,EAAAA,GAAG,CAACkB,MAAJ,GAAa,UAAUf,IAAV,EAAgBE,MAAhB,EAAwB;AACnCJ,IAAAA,QAAQ,CAACE,IAAD,CAAR,GAAiBF,QAAQ,CAACE,IAAD,CAAR,CAAegB,MAAf,CAAsB,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACf,MAAF,KAAaA,MAAjB;AAAA,KAAvB,CAAjB;AACD,GAFD;;AAGAL,EAAAA,GAAG,CAACqB,YAAJ,GAAmB,UAAUlB,IAAV,EAAgB;AACjCF,IAAAA,QAAQ,CAACE,IAAD,CAAR,GAAiB,EAAjB;AACD,GAFD;;AAIAH,EAAAA,GAAG,CAACsB,eAAJ,GAAsB,YAAY;AAChCrB,IAAAA,QAAQ,GAAG,EAAX;AACD,GAFD;;AAIA,SAAOD,GAAP;AACD,CA9CD;;eAgDeD","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\util","sourcesContent":["const eventLister = function (obj) {\r\n  var register = {}\r\n\r\n  obj.on = function (type, callback, target) {\r\n    const listener = {\r\n      callback,\r\n      target\r\n    }\r\n    if (register.hasOwnProperty(type)) {\r\n      cc.assert(callback)\r\n      for (const listener of register[type]) {\r\n        if (target === listener.target) {\r\n          return\r\n        }\r\n      }\r\n      register[type].push(listener);\r\n    } else {\r\n      register[type] = [listener]\r\n    }\r\n  }\r\n  obj.emit = function(type) {\r\n    if (register.hasOwnProperty(type)) {\r\n      const methodList = register[type]\r\n      for (var i = 0; i < methodList.length; ++i) {\r\n        const {callback, target} = methodList[i]\r\n        const args = []\r\n        for (let i = 1; i < arguments.length; ++i) {\r\n          args.push(arguments[i])\r\n        }\r\n        callback.apply(target, args)\r\n      }\r\n    }\r\n    \r\n  }\r\n  obj.remove = function (type, target) {\r\n    register[type] = register[type].filter(e => e.target !== target)\r\n  }\r\n  obj.removeLister = function (type) {\r\n    register[type] = []\r\n  }\r\n\r\n  obj.removeAllLister = function () {\r\n    register = {}\r\n  }\r\n\r\n  return obj\r\n}\r\n\r\nexport default eventLister"]}