{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\gameScene/assets\\scripts\\gameScene\\gamebeforeUI.js"],"names":["cc","Class","Component","properties","btn_ready","Node","btn_gamestart","onLoad","active","node","on","console","log","myglobal","playerData","housemanageid","accountID","bind","socket","onChangeHouseManage","data","JSON","stringify","start","onButtonClick","event","customData","requestReady","requestStart","err"],"mappings":";;;;;;AAAA;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAACJ,EAAE,CAACK,IADL;AAERC,IAAAA,aAAa,EAACN,EAAE,CAACK;AAFT,GAHP;AAQL;AAEAE,EAAAA,MAVK,oBAUK;AAEN,SAAKD,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;AACA,SAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB,CAHM,CAKN;;AACA,SAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,YAAU;AAC1BC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,sCAAoCC,qBAASC,UAAT,CAAoBC,aAApE;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,kCAAgCC,qBAASC,UAAT,CAAoBE,SAAhE;;AACA,UAAGH,qBAASC,UAAT,CAAoBC,aAApB,IAAmCF,qBAASC,UAAT,CAAoBE,SAA1D,EAAoE;AAChE;AACA,aAAKV,aAAL,CAAmBE,MAAnB,GAA4B,IAA5B;AACA,aAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;AACH,OAJD,MAIK;AACD,aAAKF,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;AACA,aAAKJ,SAAL,CAAeI,MAAf,GAAwB,IAAxB;AACH;AACJ,KAZmB,CAYlBS,IAZkB,CAYb,IAZa,CAApB,EANM,CAoBN;AACA;AACA;AACA;AACA;;AAEAJ,yBAASK,MAAT,CAAgBC,mBAAhB,CAAoC,UAASC,IAAT,EAAc;AAC9CT,MAAAA,OAAO,CAACC,GAAR,CAAY,4CAA0CS,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAtD;AACAP,2BAASC,UAAT,CAAoBC,aAApB,GAAoCK,IAApC;;AACA,UAAGP,qBAASC,UAAT,CAAoBC,aAApB,IAAmCF,qBAASC,UAAT,CAAoBE,SAA1D,EAAoE;AAChE;AACA,aAAKV,aAAL,CAAmBE,MAAnB,GAA4B,IAA5B;AACA,aAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;AACH,OAJD,MAIK;AACD,aAAKF,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;AACA,aAAKJ,SAAL,CAAeI,MAAf,GAAwB,IAAxB;AACH;AAEJ,KAZmC,CAYlCS,IAZkC,CAY7B,IAZ6B,CAApC;AAaH,GAjDI;AAmDLM,EAAAA,KAnDK,mBAmDI,CAER,CArDI;AAuDL;AAEAC,EAAAA,aAzDK,yBAyDSC,KAzDT,EAyDeC,UAzDf,EAyD0B;AAC3B,YAAOA,UAAP;AACI,WAAK,WAAL;AACIf,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;AACAC,6BAASK,MAAT,CAAgBS,YAAhB;;AACA;;AACJ,WAAK,WAAL;AACI;AACA;AACA;AACChB,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;AACAC,6BAASK,MAAT,CAAgBU,YAAhB,CAA6B,UAASC,GAAT,EAAaT,IAAb,EAAkB;AAC5C,cAAGS,GAAG,IAAE,CAAR,EAAU;AACNlB,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmBiB,GAA/B;AACH,WAFD,MAEK;AACDlB,YAAAA,OAAO,CAACC,GAAR,CAAY,sBAAqBS,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAjC;AAEH;AACH,SAPD;;AAQA;;AACL;AACI;AApBR;AAsBH;AAhFI,CAAT","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\gameScene","sourcesContent":["import myglobal from \"../../mygolbal.js\"\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        btn_ready:cc.Node,\r\n        btn_gamestart:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        this.btn_gamestart.active = false\r\n        this.btn_ready.active = false\r\n\r\n        //监听本地的发送的消息\r\n        this.node.on(\"init\",function(){\r\n            console.log(\"game beforeui init\")\r\n            console.log(\"myglobal.playerData.housemanageid\"+myglobal.playerData.housemanageid)\r\n            console.log(\"myglobal.playerData.accountID\"+myglobal.playerData.accountID)\r\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\r\n                //自己就是房主\r\n                this.btn_gamestart.active = true\r\n                this.btn_ready.active = false\r\n            }else{\r\n                this.btn_gamestart.active = false\r\n                this.btn_ready.active = true\r\n            }\r\n        }.bind(this))\r\n\r\n        //监听服务器发送来的消息\r\n        // myglobal.socket.onGameStart(function(){\r\n        //     console.log(\"gamebrforeUI onGameStart revice\")\r\n        //     this.node.active = false\r\n        // }.bind(this))\r\n\r\n        myglobal.socket.onChangeHouseManage(function(data){\r\n            console.log(\"gamebrforeUI onChangeHouseManage revice\"+JSON.stringify(data))\r\n            myglobal.playerData.housemanageid = data\r\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\r\n                //自己就是房主\r\n                this.btn_gamestart.active = true\r\n                this.btn_ready.active = false\r\n            }else{\r\n                this.btn_gamestart.active = false\r\n                this.btn_ready.active = true\r\n            }\r\n\r\n        }.bind(this))\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n    \r\n    onButtonClick(event,customData){\r\n        switch(customData){\r\n            case \"btn_ready\":\r\n                console.log(\"btn_ready\")\r\n                myglobal.socket.requestReady()\r\n                break\r\n            case \"btn_start\":\r\n                // if(isopen_sound){\r\n                //    cc.audioEngine.play(cc.url.raw(\"resources/sound/start_a.ogg\")) \r\n                //  }\r\n                 console.log(\"btn_start\")\r\n                 myglobal.socket.requestStart(function(err,data){\r\n                    if(err!=0){\r\n                        console.log(\"requestStart err\"+err)\r\n                    }else{\r\n                        console.log(\"requestStart data\"+ JSON.stringify(data))\r\n                        \r\n                    }\r\n                 })\r\n                 break    \r\n            default:\r\n                break\r\n        }\r\n    }\r\n});\r\n"]}