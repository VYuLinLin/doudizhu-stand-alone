{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\loginscene/assets\\scripts\\loginscene\\loginScene.js"],"names":["cc","Class","Component","properties","wait_node","Node","onLoad","isopen_sound","audioEngine","play","url","raw","myglobal","socket","initSocket","start","onButtonCilck","event","customData","console","log","request_wxLogin","uniqueID","playerData","accountID","nickName","avatarUrl","err","result","JSON","stringify","gobal_count","goldcount","director","loadScene","bind","Math","floor","random"],"mappings":";;;;;;AAAA;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACTC,IAAAA,SAAS,EAACJ,EAAE,CAACK;AADJ,GAHP;AAOL;AAEAC,EAAAA,MATK,oBASK;AACN;AACA,QAAGC,YAAH,EAAgB;AACZP,MAAAA,EAAE,CAACQ,WAAH,CAAeC,IAAf,CAAoBT,EAAE,CAACU,GAAH,CAAOC,GAAP,CAAW,8BAAX,CAApB,EAA+D,IAA/D;AACF;;AAEDC,yBAASC,MAAT,CAAgBC,UAAhB;AACJ,GAhBI;AAkBLC,EAAAA,KAlBK,mBAkBI,CACR,CAnBI;AAqBLC,EAAAA,aArBK,yBAqBSC,KArBT,EAqBeC,UArBf,EAqB0B;AAC3B,YAAOA,UAAP;AACI,WAAK,UAAL;AACIC,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADJ,CAGI;;AAEAR,6BAASC,MAAT,CAAgBQ,eAAhB,CAAgC;AAC5BC,UAAAA,QAAQ,EAACV,qBAASW,UAAT,CAAoBD,QADD;AAE5BE,UAAAA,SAAS,EAACZ,qBAASW,UAAT,CAAoBC,SAFF;AAG5BC,UAAAA,QAAQ,EAACb,qBAASW,UAAT,CAAoBE,QAHD;AAI5BC,UAAAA,SAAS,EAACd,qBAASW,UAAT,CAAoBG;AAJF,SAAhC,EAKE,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAClB;AACA;AACA;AACA,cAAGD,GAAG,IAAE,CAAR,EAAU;AACPR,YAAAA,OAAO,CAACC,GAAR,CAAY,SAAOO,GAAnB;AACA;AACF;;AAEDR,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBS,IAAI,CAACC,SAAL,CAAeF,MAAf,CAA7B;AACAhB,+BAASW,UAAT,CAAoBQ,WAApB,GAAkCH,MAAM,CAACI,SAAzC;AACAhC,UAAAA,EAAE,CAACiC,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACH,SAZC,CAYAC,IAZA,CAYK,IAZL,CALF;;AAkBA;;AACF,WAAK,aAAL;AACMvB,6BAASW,UAAT,CAAoBQ,WAApB,GAAkCK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,MAA3B,CAAlC;AACAtC,QAAAA,EAAE,CAACiC,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;;AACR;AACI;AA7BR;AA+BH,GArDI,CAsDL;;AAtDK,CAAT","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\loginscene","sourcesContent":["import myglobal from \"../mygolbal.js\"\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       wait_node:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        //console.log(\"qian_state.qian:\"+ qian_state.qian)\r\n        if(isopen_sound){\r\n            cc.audioEngine.play(cc.url.raw(\"resources/sound/login_bg.ogg\"),true) \r\n         }\r\n           \r\n         myglobal.socket.initSocket()\r\n    },\r\n    \r\n    start () {\r\n    },\r\n    \r\n    onButtonCilck(event,customData){\r\n        switch(customData){\r\n            case \"wx_login\":\r\n                console.log(\"wx_login request\")\r\n                \r\n                //this.wait_node.active = true\r\n                \r\n                myglobal.socket.request_wxLogin({\r\n                    uniqueID:myglobal.playerData.uniqueID,\r\n                    accountID:myglobal.playerData.accountID,\r\n                    nickName:myglobal.playerData.nickName,\r\n                    avatarUrl:myglobal.playerData.avatarUrl,\r\n                },function(err,result){\r\n                    //请求返回\r\n                    //先隐藏等待UI\r\n                    //this.wait_node.active = false\r\n                    if(err!=0){\r\n                       console.log(\"err:\"+err)\r\n                       return     \r\n                    }\r\n\r\n                    console.log(\"login sucess\" + JSON.stringify(result))\r\n                    myglobal.playerData.gobal_count = result.goldcount\r\n                    cc.director.loadScene(\"hallScene\")\r\n                }.bind(this))\r\n                break\r\n              case 'guest_login':\r\n                    myglobal.playerData.gobal_count = Math.floor(Math.random() * 100000)\r\n                    cc.director.loadScene(\"hallScene\")\r\n            default:\r\n                break\r\n        }\r\n    }\r\n    // update (dt) {},\r\n\r\n\r\n});\r\n"]}