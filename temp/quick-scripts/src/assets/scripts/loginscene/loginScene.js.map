{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\loginscene/assets\\scripts\\loginscene\\loginScene.js"],"names":["cc","Class","Component","properties","wait_node","Node","onLoad","start","onButtonCilck","event","customData","console","log","myglobal","socket","request_wxLogin","uniqueID","playerData","accountID","userName","avatarUrl","err","result","JSON","stringify","gobal_count","goldcount","director","loadScene","bind","active","count","Math","floor","random","userId","sys","localStorage","setItem"],"mappings":";;;;;;AAAA;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACP,aAASD,EAAE,CAACE,SADL;AAGPC,EAAAA,UAAU,EAAE;AACVC,IAAAA,SAAS,EAAEJ,EAAE,CAACK;AADJ,GAHL;AAOP;AAEAC,EAAAA,MATO,oBASE,CAAE,CATJ;AAWPC,EAAAA,KAXO,mBAWC,CAAE,CAXH;AAYPC,EAAAA,aAZO,yBAYOC,KAZP,EAYcC,UAZd,EAY0B;AAC/B,YAAQA,UAAR;AACE,WAAK,UAAL;AACEC,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADF,CAGE;;AAEAC,6BAASC,MAAT,CAAgBC,eAAhB,CAAgC;AAC9BC,UAAAA,QAAQ,EAAEH,qBAASI,UAAT,CAAoBD,QADA;AAE9BE,UAAAA,SAAS,EAAEL,qBAASI,UAAT,CAAoBC,SAFD;AAG9BC,UAAAA,QAAQ,EAAEN,qBAASI,UAAT,CAAoBE,QAHA;AAI9BC,UAAAA,SAAS,EAAEP,qBAASI,UAAT,CAAoBG;AAJD,SAAhC,EAKG,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACxB;AACA;AACA;AACA,cAAID,GAAG,IAAI,CAAX,EAAc;AACZV,YAAAA,OAAO,CAACC,GAAR,CAAY,SAASS,GAArB;AACA;AACD;;AAEDV,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBW,IAAI,CAACC,SAAL,CAAeF,MAAf,CAA7B;AACAT,+BAASI,UAAT,CAAoBQ,WAApB,GAAkCH,MAAM,CAACI,SAAzC;AACA1B,UAAAA,EAAE,CAAC2B,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACD,SAZE,CAYDC,IAZC,CAYI,IAZJ,CALH;;AAkBA;;AACF,WAAK,aAAL;AACE,aAAKzB,SAAL,CAAe0B,MAAf,GAAwB,IAAxB;AACA,YAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,MAA3B,CAAd;AACA,YAAMf,QAAQ,mBAAYY,KAAZ,CAAd;AACAlB,6BAASI,UAAT,CAAoBkB,MAApB,GAA6BJ,KAA7B;AACAlB,6BAASI,UAAT,CAAoBE,QAApB,GAA+BA,QAA/B;AACAnB,QAAAA,EAAE,CAACoC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAsCP,KAAtC;AACA/B,QAAAA,EAAE,CAACoC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,EAAwCnB,QAAxC;AACAnB,QAAAA,EAAE,CAAC2B,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;;AACF;AACE;AAnCJ;AAqCD,GAlDM,CAmDP;;AAnDO,CAAT","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\loginscene","sourcesContent":["import myglobal from \"../mygolbal.js\"\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    wait_node: cc.Node\r\n  },\r\n\r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad() {},\r\n\r\n  start() {},\r\n  onButtonCilck(event, customData) {\r\n    switch (customData) {\r\n      case \"wx_login\":\r\n        console.log(\"wx_login request\")\r\n\r\n        //this.wait_node.active = true\r\n\r\n        myglobal.socket.request_wxLogin({\r\n          uniqueID: myglobal.playerData.uniqueID,\r\n          accountID: myglobal.playerData.accountID,\r\n          userName: myglobal.playerData.userName,\r\n          avatarUrl: myglobal.playerData.avatarUrl,\r\n        }, function (err, result) {\r\n          //请求返回\r\n          //先隐藏等待UI\r\n          //this.wait_node.active = false\r\n          if (err != 0) {\r\n            console.log(\"err:\" + err)\r\n            return\r\n          }\r\n\r\n          console.log(\"login sucess\" + JSON.stringify(result))\r\n          myglobal.playerData.gobal_count = result.goldcount\r\n          cc.director.loadScene(\"hallScene\")\r\n        }.bind(this))\r\n        break\r\n      case 'guest_login':\r\n        this.wait_node.active = true\r\n        const count = Math.floor(Math.random() * 100000)\r\n        const userName = `guest_${count}`\r\n        myglobal.playerData.userId = count\r\n        myglobal.playerData.userName = userName\r\n        cc.sys.localStorage.setItem('userId', count)\r\n        cc.sys.localStorage.setItem('userName', userName)\r\n        cc.director.loadScene(\"hallScene\")\r\n      default:\r\n        break\r\n    }\r\n  }\r\n  // update (dt) {},\r\n\r\n\r\n});\r\n"]}